[supervisord]
nodaemon=true
logfile=/data/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:mongodb]
command=mongod --dbpath /data/mongodb --logpath /data/logs/mongodb.log --bind_ip 127.0.0.1 --port 27017
autostart=true
autorestart=true
stderr_logfile=/data/logs/mongodb.err.log
stdout_logfile=/data/logs/mongodb.out.log
user=mongodb
priority=1

[program:redis]
command=redis-server --save 60 1 --loglevel warning --dir /data/redis --bind 127.0.0.1 --port 6379
autostart=true
autorestart=true
stderr_logfile=/data/logs/redis.err.log
stdout_logfile=/data/logs/redis.out.log
user=redis
priority=2

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/data/logs/nginx.err.log
stdout_logfile=/data/logs/nginx.out.log
user=root
priority=3

[program:app]
command=node app.js
directory=/app
autostart=true
autorestart=true
stderr_logfile=/data/logs/app.err.log
stdout_logfile=/data/logs/app.out.log
user=root
priority=4
environment=NODE_ENV=production
